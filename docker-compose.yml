version: '3'
services:
  postgres:
    image: postgres
    environment:
      POSTGRES_PASSWORD: example
    volumes:
      - "postgres-db:/var/lib/postgresql/data"
  app:
    image: haru/radvent:latest
    build: .
    ports:
      - "3000:3000"
    volumes:
      - "radvent-data:/var/radvent_data"
    links:
      - postgres:radvent_postgres
    environment:
      DB: postgres
      DB_USERNAME: postgres
      DB_PASSWORD: example
      DB_HOST: radvent_postgres
      DB_CREATE_ON_START: "true"
      #RAILS_RELATIVE_URL_ROOT: "/test"
  browserless:
    image: browserless/chrome
    restart: unless-stopped
    # ports:
    #   - 3000:3000
    environment:
      # Maximum concurrent sessions
      MAX_CONCURRENT_SESSIONS: 10
      # Connection timeout in milliseconds
      CONNECTION_TIMEOUT: 60000
      # Maximum queue length
      MAX_QUEUE_LENGTH: 10
      # Enable debugger for Playwright
      ENABLE_DEBUGGER: "false"
      # Token for authentication (optional, set to empty for no auth)
      TOKEN: ""
  # mysql:
  #   image: mysql
  #   environment:
  #     MYSQL_ROOT_PASSWORD: example
  #   volumes:
  #     - "$PWD/docker/mysql:/var/lib/mysql"
  #   ports:
  #     - "3306:3306"
volumes:
  postgres-db:
    driver: local
  radvent-data:
    driver: local

