
%html
  %head
    %title= system_title
    %meta{"http-equiv"=>"X-UA-Compatible", :content=>"IE=Edge"}
    %meta{"charset"=>"UTF-8"}
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %meta{:content => "width=device-width,initial-scale=1", :name => "viewport"}/
    %link{:href=>"#{root_path}assets/default.min.css", :rel=>"stylesheet"}
    = favicon_link_tag if Rails.application.assets.find_asset('favicon.ico')
    = csrf_meta_tags
    = csp_meta_tag
    = stylesheet_link_tag 'application_pack', 'data-turbo-track': 'reload'
    = stylesheet_link_tag 'application', media: 'all', 'data-turbo-track': 'reload'
    = javascript_include_tag 'application', 'data-turbo-track': 'reload', defer: true


    %script{:src=>"#{root_path}assets/highlight.min.js"}

    :javascript
      hljs.initHighlightingOnLoad()
  %body#advent_calendar_body
    %nav#top-menu.navbar.navbar-light.navbar-expand-lg.px-3
      = link_to "TOP", root_path, class: "navbar-brand"
      %button.navbar-toggler{type:"button", "data-mdb-toggle": "collapse", "data-mdb-target": "#navTopMenu", "aria-controls": "navTopMenu", "aria-expanded": "false", "aria-label": "Toggle navigation"}
        %span.navbar-toggler-icon
      %div#navTopMenu.collapse.navbar-collapse
        %div.navbar-nav.ms-auto
          - if user_signed_in?
            - if current_user.admin?
              = link_to  events_list_path, class: "nav-item nav-link" do
                %i.fa.fa-cog
                = t('menu.settings')
            = link_to  edit_user_registration_path, class: "nav-item nav-link" do
              %i.fa.fa-user
              = "#{current_user.name}"
            = link_to destroy_user_session_path, class: "nav-item nav-link", data: { "turbo-method": :delete } do
              %i.fa.fa-sign-out-alt
              = t('menu.sign_out')
          - else
            = link_to new_user_registration_path, class: "nav-item nav-link" do
              %i.fa.fa-user-plus
              = t("menu.sign_up")
            = link_to new_user_session_path, class: "nav-item nav-link" do
              %i.fa.fa-sign-in-alt
              = t("menu.sign_in")
    = content_for?(:header_bar) ? yield(:header_bar) : ''
    = content_for?(:jumbotron) ? yield(:jumbotron) : ''
    %div.container
      - if flash[:notice]
        %div.alert.alert-success.alert-dismissible.fade.show{role: "alert"}
          = flash[:notice]
          %button.btn-close{type: "button", "data-mdb-dismiss": "alert", "aria-label": "Close"}
      - if flash[:alert]
        %div.alert.alert-danger.alert-dismissible.fade.show{role: "alert"}
          = flash[:alert]
          %button.btn-close{type: "button", "data-mdb-dismiss": "alert", "aria-label": "Close"}
      = content_for?(:content) ? yield(:content) : yield

%footer.welcome-footer
  %div.container
    %p.small
      Powered by
      = link_to "radvent", "https://github.com/haru/radvent/"
      = "v#{Radvent::Version.version}"
